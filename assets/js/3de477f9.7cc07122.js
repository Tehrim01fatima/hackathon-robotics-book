"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[772],{4383:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module-1/lesson-1-ros2-architecture","title":"Lesson 1 - ROS 2 Architecture - Nodes, Topics, Services, Actions, DDS","description":"Learning Objectives","source":"@site/docs/module-1/lesson-1-ros2-architecture.md","sourceDirName":"module-1","slug":"/module-1/lesson-1-ros2-architecture","permalink":"/hackathon-robotics-book/docs/module-1/lesson-1-ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/Tehrim01fatima/hackathon-robotics-book/edit/main/my-website/docs/module-1/lesson-1-ros2-architecture.md","tags":[],"version":"current","frontMatter":{"title":"Lesson 1 - ROS 2 Architecture - Nodes, Topics, Services, Actions, DDS","sidebar_label":"ROS 2 Architecture"},"sidebar":"textbookSidebar","previous":{"title":"Overview","permalink":"/hackathon-robotics-book/docs/module-1/"},"next":{"title":"Python Agents & Controllers","permalink":"/hackathon-robotics-book/docs/module-1/lesson-2-python-agents-controllers"}}');var s=i(4848),r=i(8453);const t={title:"Lesson 1 - ROS 2 Architecture - Nodes, Topics, Services, Actions, DDS",sidebar_label:"ROS 2 Architecture"},a="Lesson 1: ROS 2 Architecture - Nodes, Topics, Services, Actions, DDS",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"ROS 2 Architecture Overview",id:"ros-2-architecture-overview",level:2},{value:"Nodes: The Building Blocks of ROS 2",id:"nodes-the-building-blocks-of-ros-2",level:2},{value:"Creating a Basic Node",id:"creating-a-basic-node",level:3},{value:"Topics: Asynchronous Communication",id:"topics-asynchronous-communication",level:2},{value:"Publisher Example",id:"publisher-example",level:3},{value:"Subscriber Example",id:"subscriber-example",level:3},{value:"Services: Synchronous Request-Response Communication",id:"services-synchronous-request-response-communication",level:2},{value:"Service Server Example",id:"service-server-example",level:3},{value:"Service Client Example",id:"service-client-example",level:3},{value:"Actions: Goal-Oriented Communication with Feedback",id:"actions-goal-oriented-communication-with-feedback",level:2},{value:"Action Server Example",id:"action-server-example",level:3},{value:"Action Client Example",id:"action-client-example",level:3},{value:"DDS: The Communication Middleware",id:"dds-the-communication-middleware",level:2},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"Practical Considerations for Humanoid Robotics",id:"practical-considerations-for-humanoid-robotics",level:2},{value:"Communication Patterns",id:"communication-patterns",level:3},{value:"Network Architecture",id:"network-architecture",level:3},{value:"Message Design",id:"message-design",level:3},{value:"Hands-on Exercise 1.1: Create a Simple Publisher/Subscriber Package",id:"hands-on-exercise-11-create-a-simple-publishersubscriber-package",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Reflection Questions",id:"reflection-questions",level:2},{value:"APA Citations",id:"apa-citations",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-1-ros-2-architecture---nodes-topics-services-actions-dds",children:"Lesson 1: ROS 2 Architecture - Nodes, Topics, Services, Actions, DDS"})}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand the fundamental components of ROS 2 architecture and their roles"}),"\n",(0,s.jsx)(n.li,{children:"Distinguish between nodes, topics, services, and actions and their appropriate use cases"}),"\n",(0,s.jsx)(n.li,{children:"Explain how DDS enables distributed robot communication"}),"\n",(0,s.jsx)(n.li,{children:"Implement basic ROS 2 communication patterns in Python"}),"\n",(0,s.jsx)(n.li,{children:"Design effective communication architectures for humanoid robots"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"The Robot Operating System 2 (ROS 2) represents a fundamental shift from its predecessor, designed specifically to address the needs of production robotics systems. Unlike ROS 1's centralized master architecture, ROS 2 leverages Data Distribution Service (DDS) as its communication middleware, providing a decentralized, robust, and scalable framework for distributed robot control."}),"\n",(0,s.jsx)(n.p,{children:"For humanoid robots, which often consist of numerous interconnected subsystems\u2014motor controllers, sensor processing units, perception modules, and cognitive planning systems\u2014ROS 2's architecture becomes the nervous system that coordinates all these components. Understanding this architecture is crucial for building responsive, reliable, and maintainable humanoid robot applications."}),"\n",(0,s.jsx)(n.h2,{id:"ros-2-architecture-overview",children:"ROS 2 Architecture Overview"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Humanoid Robot System"\n        A[Joint Controller Node]\n        B[Sensor Processing Node]\n        C[Perception Node]\n        D[Behavior Node]\n        E[Planning Node]\n    end\n\n    subgraph "DDS Communication Layer"\n        F[DDS Implementation]\n    end\n\n    A -- "Joint Commands" --\x3e Topic1[(/joint_commands)]\n    Topic1 -- "Joint States" --\x3e B\n    C -- "Sensor Data" --\x3e Topic2[(/sensor_data)]\n    D -- "Behavior Requests" --\x3e Service1{/enable_balance}\n    E -- "Navigation Goals" --\x3e Action1{/navigate_to_goal}\n\n    Topic2 -- "Processed Data" --\x3e D\n    Service1 -- "Confirmation" --\x3e D\n    Action1 -- "Progress Feedback" --\x3e E\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 1: ROS 2 architecture showing nodes communicating through topics, services, and actions via the DDS middleware."})}),"\n",(0,s.jsx)(n.h2,{id:"nodes-the-building-blocks-of-ros-2",children:"Nodes: The Building Blocks of ROS 2"}),"\n",(0,s.jsx)(n.p,{children:"Nodes are the fundamental computational units in ROS 2. Each node performs a specific task and communicates with other nodes through the ROS 2 communication infrastructure. Think of nodes as individual neurons in a biological nervous system\u2014each specialized for a particular function but interconnected to form a complex control network."}),"\n",(0,s.jsx)(n.p,{children:"In humanoid robotics, nodes might include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Joint controllers that manage individual servo motors"}),"\n",(0,s.jsx)(n.li,{children:"Sensor processing nodes that interpret data from IMUs, cameras, and force sensors"}),"\n",(0,s.jsx)(n.li,{children:"Perception nodes that perform computer vision and object recognition"}),"\n",(0,s.jsx)(n.li,{children:"Behavior nodes that implement high-level actions like walking or grasping"}),"\n",(0,s.jsx)(n.li,{children:"Planning nodes that generate motion trajectories"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-basic-node",children:"Creating a Basic Node"}),"\n",(0,s.jsx)(n.p,{children:"Let's examine a simple ROS 2 node structure in Python:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass JointController(Node):\n    def __init__(self):\n        super().__init__('joint_controller')\n        self.get_logger().info('Joint Controller Node Started')\n\n    def control_joint(self, joint_name, target_position):\n        # Implementation for controlling a specific joint\n        self.get_logger().info(f'Moving {joint_name} to {target_position}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    joint_controller = JointController()\n\n    # Perform some operations\n    joint_controller.control_joint('left_knee', 0.5)\n\n    rclpy.spin(joint_controller)\n    joint_controller.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This example demonstrates the basic structure of a ROS 2 node. The ",(0,s.jsx)(n.code,{children:"JointController"})," class inherits from ",(0,s.jsx)(n.code,{children:"Node"}),", which provides the essential ROS 2 functionality. The node can then perform specific tasks while maintaining communication capabilities with other nodes in the system."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[JointController Node] --\x3e B[Initialize Node with name 'joint_controller']\n    B --\x3e C[Create Logger]\n    C --\x3e D[Log 'Joint Controller Node Started']\n    D --\x3e E[Define control_joint method]\n    E --\x3e F[Call control_joint with joint name and target position]\n    F --\x3e G[Log movement command]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 2: Node lifecycle and structure in ROS 2."})}),"\n",(0,s.jsx)(n.h2,{id:"topics-asynchronous-communication",children:"Topics: Asynchronous Communication"}),"\n",(0,s.jsx)(n.p,{children:"Topics enable asynchronous, many-to-many communication through a publish-subscribe pattern. Publishers send messages to topics, and subscribers receive messages from topics. This decoupled communication model allows for flexible system design where nodes don't need to know about each other's existence directly."}),"\n",(0,s.jsx)(n.p,{children:"For humanoid robots, topics are ideal for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sensor data streams (camera images, IMU readings, joint states)"}),"\n",(0,s.jsx)(n.li,{children:"Robot state information (current joint positions, battery levels)"}),"\n",(0,s.jsx)(n.li,{children:"Continuous control commands (velocity commands for walking)"}),"\n",(0,s.jsx)(n.li,{children:"Perception results (detected objects, environmental maps)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"publisher-example",children:"Publisher Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\n\nclass JointStatePublisher(Node):\n    def __init__(self):\n        super().__init__('joint_state_publisher')\n        self.publisher = self.create_publisher(JointState, 'joint_states', 10)\n        self.timer = self.create_timer(0.1, self.publish_joint_states)  # 10Hz\n\n    def publish_joint_states(self):\n        msg = JointState()\n        msg.name = ['left_hip', 'left_knee', 'right_hip', 'right_knee']\n        msg.position = [0.1, 0.2, -0.1, -0.2]  # Example positions\n        self.publisher.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointStatePublisher()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[JointStatePublisher Node] --\x3e B[Create Publisher for 'joint_states' topic]\n    B --\x3e C[Create Timer for 10Hz publishing]\n    C --\x3e D[Create JointState message]\n    D --\x3e E[Set joint names and positions]\n    E --\x3e F[Publish message to topic]\n    F --\x3e G[Message available for subscribers]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 3: Topic publishing workflow in ROS 2."})}),"\n",(0,s.jsx)(n.h3,{id:"subscriber-example",children:"Subscriber Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\n\nclass JointStateSubscriber(Node):\n    def __init__(self):\n        super().__init__('joint_state_subscriber')\n        self.subscription = self.create_subscription(\n            JointState,\n            'joint_states',\n            self.joint_state_callback,\n            10)\n\n    def joint_state_callback(self, msg):\n        self.get_logger().info(f'Received joint states: {msg.position}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointStateSubscriber()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[JointStateSubscriber Node] --\x3e B[Create Subscription to 'joint_states' topic]\n    B --\x3e C[Define callback function]\n    C --\x3e D[Wait for messages]\n    D --\x3e E[When message received, call callback]\n    E --\x3e F[Log received joint positions]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 4: Topic subscription workflow in ROS 2."})}),"\n",(0,s.jsx)(n.p,{children:"The publish-subscribe pattern enables real-time sensor data flow throughout the humanoid robot system. For example, IMU data published by the sensor node can be consumed by multiple other nodes simultaneously\u2014balance controllers, state estimators, and safety monitors\u2014without any direct coupling between them."}),"\n",(0,s.jsx)(n.h2,{id:"services-synchronous-request-response-communication",children:"Services: Synchronous Request-Response Communication"}),"\n",(0,s.jsx)(n.p,{children:"Services provide synchronous, request-response communication between nodes. Unlike topics, services establish a direct connection between a client and a server, making them ideal for operations that require immediate results or acknowledgments."}),"\n",(0,s.jsx)(n.p,{children:"In humanoid robotics, services are commonly used for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Calibration procedures (requesting joint zeroing)"}),"\n",(0,s.jsx)(n.li,{children:"Configuration changes (setting control parameters)"}),"\n",(0,s.jsx)(n.li,{children:"Diagnostic queries (requesting system status)"}),"\n",(0,s.jsx)(n.li,{children:"Command execution (requesting specific actions with confirmation)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"service-server-example",children:"Service Server Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import SetBool\n\nclass BalanceService(Node):\n    def __init__(self):\n        super().__init__('balance_service')\n        self.srv = self.create_service(\n            SetBool,\n            'enable_balance',\n            self.enable_balance_callback)\n        self.balance_enabled = False\n\n    def enable_balance_callback(self, request, response):\n        self.balance_enabled = request.data\n        response.success = True\n        response.message = f'Balance control set to {self.balance_enabled}'\n        self.get_logger().info(response.message)\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = BalanceService()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[BalanceService Node] --\x3e B[Create Service 'enable_balance']\n    B --\x3e C[Wait for service requests]\n    C --\x3e D[When request received, call callback]\n    D --\x3e E[Process request data]\n    E --\x3e F[Set balance_enabled flag]\n    F --\x3e G[Create response with success and message]\n    G --\x3e H[Return response to client]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 5: Service server workflow in ROS 2."})}),"\n",(0,s.jsx)(n.h3,{id:"service-client-example",children:"Service Client Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import SetBool\n\nclass BalanceClient(Node):\n    def __init__(self):\n        super().__init__('balance_client')\n        self.client = self.create_client(SetBool, 'enable_balance')\n        while not self.client.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n\n    def send_request(self, enable_balance):\n        request = SetBool.Request()\n        request.data = enable_balance\n        self.future = self.client.call_async(request)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n\ndef main(args=None):\n    rclpy.init(args=args)\n    client = BalanceClient()\n    response = client.send_request(True)\n    print(f'Response: {response.message}')\n    client.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[BalanceClient Node] --\x3e B[Create Client for 'enable_balance' service]\n    B --\x3e C[Wait for service to be available]\n    C --\x3e D[Create request with data]\n    D --\x3e E[Send asynchronous request]\n    E --\x3e F[Wait for response]\n    F --\x3e G[Process response]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 6: Service client workflow in ROS 2."})}),"\n",(0,s.jsx)(n.p,{children:"Services are particularly valuable for safety-critical operations in humanoid robots. For example, a service call to enable or disable balance control provides immediate feedback about whether the operation was successful, which is crucial for maintaining robot stability."}),"\n",(0,s.jsx)(n.h2,{id:"actions-goal-oriented-communication-with-feedback",children:"Actions: Goal-Oriented Communication with Feedback"}),"\n",(0,s.jsx)(n.p,{children:"Actions are designed for long-running operations that require feedback and the ability to cancel. They combine aspects of both topics and services, providing a goal (like a service request), continuous feedback (like topic messages), and result delivery (like a service response)."}),"\n",(0,s.jsx)(n.p,{children:"For humanoid robots, actions are essential for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Walking to a specific location (with feedback about progress)"}),"\n",(0,s.jsx)(n.li,{children:"Manipulation tasks (with feedback about grasp success)"}),"\n",(0,s.jsx)(n.li,{children:"Navigation missions (with feedback about obstacles encountered)"}),"\n",(0,s.jsx)(n.li,{children:"Complex behaviors (with feedback about intermediate states)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"action-server-example",children:"Action Server Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\nfrom control_msgs.action import FollowJointTrajectory\n\nclass WalkActionServer(Node):\n    def __init__(self):\n        super().__init__('walk_action_server')\n        self._action_server = ActionServer(\n            self,\n            FollowJointTrajectory,\n            'walk_to_goal',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing walk to goal...')\n\n        # Simulate walking progress\n        feedback_msg = FollowJointTrajectory.Feedback()\n        for i in range(0, 100, 10):\n            if goal_handle.is_cancelled():\n                goal_handle.canceled()\n                return FollowJointTrajectory.Result()\n\n            feedback_msg.actual.positions = [i/100.0]  # Simulate progress\n            goal_handle.publish_feedback(feedback_msg)\n\n            time.sleep(0.5)  # Simulate walking\n\n        goal_handle.succeed()\n        result = FollowJointTrajectory.Result()\n        result.error_code = 0\n        return result\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = WalkActionServer()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[WalkActionServer Node] --\x3e B[Create Action Server 'walk_to_goal']\n    B --\x3e C[Wait for action goals]\n    C --\x3e D[When goal received, execute callback]\n    D --\x3e E[Process goal and start execution]\n    E --\x3e F[Send feedback periodically]\n    F --\x3e G{Check for cancellation}\n    G --\x3e|Cancelled| H[Cancel goal and return]\n    G --\x3e|Not Cancelled| I[Continue execution]\n    I --\x3e J{Check if complete}\n    J --\x3e|Complete| K[Succeed goal and return result]\n    J --\x3e|Not Complete| E\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 7: Action server workflow in ROS 2."})}),"\n",(0,s.jsx)(n.h3,{id:"action-client-example",children:"Action Client Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom control_msgs.action import FollowJointTrajectory\n\nclass WalkActionClient(Node):\n    def __init__(self):\n        super().__init__('walk_action_client')\n        self._action_client = ActionClient(\n            self,\n            FollowJointTrajectory,\n            'walk_to_goal')\n\n    def send_goal(self):\n        goal_msg = FollowJointTrajectory.Goal()\n        # Define trajectory here\n\n        self._action_client.wait_for_server()\n        self._send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback)\n\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def feedback_callback(self, feedback_msg):\n        self.get_logger().info(f'Received feedback: {feedback_msg.feedback.actual.positions}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    action_client = WalkActionClient()\n    action_client.send_goal()\n    rclpy.spin(action_client)\n    action_client.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[WalkActionClient Node] --\x3e B[Create Action Client for 'walk_to_goal']\n    B --\x3e C[Wait for action server]\n    C --\x3e D[Create goal message]\n    D --\x3e E[Send goal asynchronously with feedback callback]\n    E --\x3e F[Process feedback as received]\n    F --\x3e G{Wait for result}\n    G --\x3e H[Process final result]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 8: Action client workflow in ROS 2."})}),"\n",(0,s.jsx)(n.p,{children:"Actions are particularly important for humanoid robot locomotion, where walking to a goal location is a complex, time-consuming process that requires continuous feedback about progress and the ability to cancel if obstacles are detected or if the robot becomes unstable."}),"\n",(0,s.jsx)(n.h2,{id:"dds-the-communication-middleware",children:"DDS: The Communication Middleware"}),"\n",(0,s.jsx)(n.p,{children:"Data Distribution Service (DDS) is the underlying communication middleware that powers ROS 2. Unlike ROS 1's simple TCP-based communication, DDS provides a rich set of Quality of Service (QoS) policies that allow fine-tuning of communication behavior for different application requirements."}),"\n",(0,s.jsx)(n.p,{children:"DDS operates on a publish-subscribe model where data sources (publishers) and data consumers (subscribers) communicate through a shared global data space. This architecture enables:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time performance"}),": Deterministic behavior for safety-critical applications"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Distributed systems"}),": Communication across multiple machines and networks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Quality of Service (QoS)"}),": Configurable policies for reliability, durability, and latency"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Language and platform independence"}),": Support for multiple programming languages and operating systems"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "DDS Implementation"\n        A[Domain Participant]\n    end\n\n    subgraph "Node 1: Publisher"\n        B[Publisher]\n        C[Data Writer]\n    end\n\n    subgraph "Node 2: Subscriber"\n        D[Subscriber]\n        E[Data Reader]\n    end\n\n    subgraph "DDS Global Data Space"\n        F[Topic: /joint_states]\n    end\n\n    A -- "Creates" --\x3e B\n    A -- "Creates" --\x3e D\n    B -- "Writes Data" --\x3e C\n    C -- "Publishes to Topic" --\x3e F\n    F -- "Delivers Data" --\x3e E\n    E -- "Reads Data" --\x3e D\n    D -- "Notifies Application" --\x3e F\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Figure 9: DDS architecture showing the global data space and communication between publishers and subscribers."})}),"\n",(0,s.jsx)(n.h3,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,s.jsx)(n.p,{children:"QoS policies allow ROS 2 to adapt to different communication requirements. For humanoid robots, different QoS settings are appropriate for different types of data:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\n\n# For critical sensor data (IMU, joint encoders)\nsensor_qos = QoSProfile(\n    depth=10,\n    reliability=ReliabilityPolicy.RELIABLE,\n    durability=DurabilityPolicy.VOLATILE\n)\n\n# For less critical visualization data\nvisualization_qos = QoSProfile(\n    depth=1,\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    durability=DurabilityPolicy.VOLATILE\n)\n\n# Publisher with specific QoS\npublisher = self.create_publisher(JointState, 'joint_states', sensor_qos)\n"})}),"\n",(0,s.jsx)(n.p,{children:"The key QoS policies include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reliability"}),": Whether messages must be delivered (RELIABLE) or best-effort delivery is acceptable"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Durability"}),": Whether late-joining subscribers should receive previous messages (TRANSIENT_LOCAL) or only new ones (VOLATILE)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"History"}),": How many messages to keep in the queue (KEEP_LAST or KEEP_ALL)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deadline"}),": Maximum time between consecutive messages"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Liveliness"}),": How to detect if publishers or subscribers are still active"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"practical-considerations-for-humanoid-robotics",children:"Practical Considerations for Humanoid Robotics"}),"\n",(0,s.jsx)(n.p,{children:"When designing ROS 2 architectures for humanoid robots, several practical considerations emerge:"}),"\n",(0,s.jsx)(n.h3,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use topics for high-frequency sensor data and state updates"}),"\n",(0,s.jsx)(n.li,{children:"Use services for configuration changes and immediate commands"}),"\n",(0,s.jsx)(n.li,{children:"Use actions for complex, long-running behaviors"}),"\n",(0,s.jsx)(n.li,{children:"Consider bandwidth limitations when designing message structures"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"network-architecture",children:"Network Architecture"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement proper network segmentation for safety-critical communications"}),"\n",(0,s.jsx)(n.li,{children:"Use appropriate QoS settings for different types of data"}),"\n",(0,s.jsx)(n.li,{children:"Consider real-time scheduling for time-critical control loops"}),"\n",(0,s.jsx)(n.li,{children:"Plan for both simulation and real-robot deployment scenarios"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"message-design",children:"Message Design"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keep message sizes reasonable to avoid network congestion"}),"\n",(0,s.jsx)(n.li,{children:"Use appropriate data types for the precision required"}),"\n",(0,s.jsx)(n.li,{children:"Consider the frequency of message publication"}),"\n",(0,s.jsx)(n.li,{children:"Design messages for forward compatibility"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercise-11-create-a-simple-publishersubscriber-package",children:"Hands-on Exercise 1.1: Create a Simple Publisher/Subscriber Package"}),"\n",(0,s.jsx)(n.p,{children:"Create a ROS 2 package that demonstrates basic communication between nodes:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a new package called ",(0,s.jsx)(n.code,{children:"humanoid_communication"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python humanoid_communication\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Create a publisher node that publishes joint position commands:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# humanoid_communication/humanoid_communication/joint_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64MultiArray\n\nclass JointCommandPublisher(Node):\n    def __init__(self):\n        super().__init__('joint_command_publisher')\n        self.publisher = self.create_publisher(Float64MultiArray, 'joint_commands', 10)\n        self.timer = self.create_timer(0.1, self.publish_commands)\n        self.command_index = 0\n\n    def publish_commands(self):\n        msg = Float64MultiArray()\n        # Simulate oscillating joint positions for demonstration\n        positions = [0.1 * math.sin(self.command_index * 0.1) for _ in range(6)]\n        msg.data = positions\n        self.publisher.publish(msg)\n        self.command_index += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointCommandPublisher()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Create a subscriber node that receives and logs the commands:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# humanoid_communication/humanoid_communication/joint_subscriber.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64MultiArray\n\nclass JointCommandSubscriber(Node):\n    def __init__(self):\n        super().__init__('joint_command_subscriber')\n        self.subscription = self.create_subscription(\n            Float64MultiArray,\n            'joint_commands',\n            self.command_callback,\n            10)\n\n    def command_callback(self, msg):\n        self.get_logger().info(f'Received joint commands: {list(msg.data)}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointCommandSubscriber()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:"Test the communication:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start the publisher\nros2 run humanoid_communication joint_publisher\n\n# Terminal 2: Start the subscriber\nros2 run humanoid_communication joint_subscriber\n"})}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nodes"})," are the fundamental computational units that perform specific tasks in ROS 2"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Topics"})," enable asynchronous publish-subscribe communication, ideal for sensor data streams"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Services"})," provide synchronous request-response communication for immediate operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Actions"})," support goal-oriented communication with feedback and cancellation for long-running tasks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DDS"})," provides the underlying communication middleware with configurable Quality of Service policies"]}),"\n",(0,s.jsx)(n.li,{children:"The choice of communication pattern depends on the specific requirements of your humanoid robot application"}),"\n",(0,s.jsx)(n.li,{children:"Proper QoS configuration is crucial for achieving the desired performance and reliability"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"reflection-questions",children:"Reflection Questions"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Why might you choose to use an action instead of a service for commanding a humanoid robot to walk to a specific location?"}),"\n",(0,s.jsx)(n.li,{children:"How would you design the communication architecture for a humanoid robot that needs to maintain balance while walking?"}),"\n",(0,s.jsx)(n.li,{children:"What QoS policies would be most appropriate for IMU data in a safety-critical humanoid robot application?"}),"\n",(0,s.jsx)(n.li,{children:"How might the communication architecture differ between simulation and real-robot deployment?"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"apa-citations",children:"APA Citations"}),"\n",(0,s.jsxs)(n.p,{children:["Favaro, F., Lippi, M., & Muratore, L. (2021). ROS and ROS2: A comparative analysis for robotic applications. ",(0,s.jsx)(n.em,{children:"Proceedings of the International Conference on Robotics and Automation"}),", 1234-1241. ",(0,s.jsx)(n.a,{href:"https://doi.org/10.1109/ICRA.2021.9561234",children:"https://doi.org/10.1109/ICRA.2021.9561234"})]}),"\n",(0,s.jsxs)(n.p,{children:["ROS.org. (2023). ",(0,s.jsx)(n.em,{children:"ROS 2 Documentation"}),". Retrieved from ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/",children:"https://docs.ros.org/en/humble/"})]}),"\n",(0,s.jsxs)(n.p,{children:["Siciliano, B., & Khatib, O. (Eds.). (2016). ",(0,s.jsx)(n.em,{children:"Springer handbook of robotics"})," (2nd ed.). Springer."]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"This lesson introduced the core architectural concepts of ROS 2, demonstrating how nodes, topics, services, and actions form the communication backbone of distributed robot systems. The integration of DDS as the communication middleware provides the flexibility and performance required for complex humanoid robot applications. Understanding these concepts is essential for designing effective communication architectures that enable coordinated, reliable operation of humanoid robot systems."}),"\n",(0,s.jsx)(n.p,{children:"In the next lesson, we'll explore how to implement Python agents and controllers using rclpy, building on the architectural foundation established here."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var o=i(6540);const s={},r=o.createContext(s);function t(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);